<!-- top-nav-bar ------------------ -->
<img src="assets/image/Re-collect logo.png" alt="Logo" style="
width: 8%;"/>
<!-- <button  type="welcome" (click)="goToHome()"> home</button> -->
<div class="display--flex justify-content--flex-end">
   <!-- <span class="material-symbols-outlined">
        search
    </span> -->
    <span class="material-symbols-outlined">
        person
    </span>
    <p>{{ localStorUsername }}</p>
    <button (click)="signOut()">Log out</button>
    <button *ngIf="!isLoggedIn" (click)="goToOnboarding()" style="border: none;">
        sign in here
    </button>
</div>

<h2 style="text-align:center">Create Original Work</h2>

<!-- title & creator----------------  -->
<!-- <div class="display--flex justify-content--flex-start">
</div> -->
<!-- <div class="w3-border">
    <div class="w3-grey" style="height:24px;width:20%"></div>
</div> -->
<div class="display--flex justify-content--flex-end">
    <p>@{{ localStorUsername }}</p>
</div>
<div class="auth-container">
<p style="color: rgb(130, 130, 130)">To start, submit at least one original work of yours to enable interacting with other works</p>
<div>
    <textarea class="textarea-create-original" [(ngModel)]="inputText" *ngIf="!isButtonSaveClicked" 
    id="originalParagraph" rows="20" 
    placeholder="Write your original work here"></textarea>

</div>
<p *ngIf="isButtonSaveClicked" style="color: rgb(130, 130, 130)">Select one sentence as title. This will be the only visible text among all by default.</p>
<!-- Display Full Original work -->
<div style="white-space: pre-line">
    <p *ngIf="isButtonSaveClicked">Your Original work:</p>

    <!-- selct sentence to publish -->
    <div *ngIf="isButtonSaveClicked">
        <div *ngFor="let line of inputTextinArray; let i = index" 
        [ngClass]= "i === selectedLineIndex ? 'selected' : 'not-selected'" (click)="onLineClick(i)">
            {{ line }}
        </div>
    </div>

    <!-- <div *ngIf="isButtonSaveClicked">
        <div *ngFor="let line of inputText.split('\n')" (click)="selectedLine = line;">
            {{line}}
        </div>
    </div> -->
</div>

<!-- "Save" button -->
<!-- shown when "Save" not clicked & disabled when no input texts -->
<p *ngIf="!isButtonSaveClicked" style="color: rgb(130, 130, 130)">(you can no longer edit the piece once hitting Save)</p>
<button type="submit" *ngIf="!isButtonSaveClicked" (click)="enableSaveButton(); getInputText()" [disabled]="!inputText" >
    Save
</button>

<!-- "Publish" button -->
<!-- shown when "Save" is clicked & disabled when no line selected -->
<button type="submit" *ngIf="isButtonSaveClicked" (click)="publishNewParagraph()" [disabled]="!lineSelected">
    Publish
</button>
<button  type="welcome" *ngIf="isPublished" (click)="goToHome()"> Enter Re-collect</button>
</div>
